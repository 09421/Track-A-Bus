@model dynamic

@{
    ViewBag.Title = "title";
}

<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
      <style type="text/css">
          html { height: 100% }
          body { height: 100%; margin: 0; padding: 0 }
          #map-canvas { height: 100% }
      </style>
    <script type="text/javascript"
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCSenDrahjqgKeFo2xqFmtY4xAEuASX0dk&sensor=false">
    </script>
      <script type="text/javascript">
          function initialize() {
              var mapOptions = {
                  center: new google.maps.LatLng(-34.397, 150.644),
                  zoom: 8,
                  mapTypeId: google.maps.MapTypeId.ROADMAP,
                  disableDefaultUI: true
              };
              var map = new google.maps.Map(document.getElementById("map-canvas"),
                  mapOptions);

              google.maps.event.addListener(map, "click", function(event) {
                  rey.push(event.latLng);
                  drawRoute();
              });
            
              function drawRoute() {
                  var path = new google.maps.Polyline({                    
                      path: rey,
                      strokeColor: '#FF0000',
                      strokeOpacity: 1.0,
                      strokeWeight: 2,
                      editable: true
                  });
                  path.setMap(map);
                  a = path.getPath();
              }
          }

          function returnPathCoord() {
              if (a != null) {
                  if (a.getArray != null) {
                      $.get("Map/Save", { s: a.getArray().toString() });
                  }
              }
          }

          var a;
          var rey = new Array();
          google.maps.event.addDomListener(window, 'load', initialize);
      </script>
  </head>
    <body>
        <td>
           <input id="clickMe" type="button" value="clickme" onclick="returnPathCoord();" />
        </td>
        <div id="map-canvas"/>
    </body>
</html>
