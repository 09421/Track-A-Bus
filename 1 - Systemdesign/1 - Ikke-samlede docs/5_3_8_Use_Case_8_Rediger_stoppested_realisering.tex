\documentclass[Main.tex]{subfiles} 
\begin{document}

\subsubsection{Use Case 8: rediger stoppested}
Use Case 8 består af 3 normalforløb der omhandler at kunne tilføje stoppesteder til database, slette stoppesteder fra databasen, og rediger position og navn for stoppesteder der allerede findes. alle 3 normalforløb bliver startet fra \url{www.trackabus.dk/Stop}, Brugergrænsenfladen kan ses på figur\ref{fig:StopViewHjemmeside}. 

Normalforløb 1 - Stoppested bliver tilføjet til rute. Use Cases bliver initialiseret ved at administratoren trykker et sted på det viste kort, dette vil trigger et klik event på kortet er plasere en marker der hvor der blev trykket. Det er muligt at fjerne denne marker ved at trykker på den, da det vil trigger et klik event på markeren, der vil slette den, og derved gøre det muligt at plasere en ny marker. Efter at have plaseret markeren vil det være muligt at trække den rundt på kortet, for at plasere den præcis hvor den skal være. Når den endelige ønskede plasering for markeren er fundet, indtastes navnet for stoppestedet i feltet 'Stop name'. Ved tryk på knappen 'Save', vil gps-koordinaterne for markeren blive fundet, og blive sendt, sammen med stopnavnet, med et asynkron kald til StopController funktionen Save() der kalder ned i data tilgangs laget for at gemme det nye busstoppested i MySQL databasen.

Normalforløb 2 bliver initialiseret ved at administratoren vælger et stoppested fra listen over alle stoppesteder, og trykker på knappen 'Delete'. Dette vil lave et asynkron kald til StopController funktionen Delete(), der kalder ned til data tilgangs laget, der sletter det valgte busstoppested fra MySQL databasen.

Normalforløb 3 omhandler at kunne ændre position og navn for et givet stoppested. Denne bliver initialiseret ved at administratoren vælger et stoppested fra listen af stoppesteder, dette vil trigger et onchange event, der laver et asynkron kald til StopController funktionen GetPosistion() der kalder videre ned i data tilgangs laget, for at hente gps-koordinaterne for the valgte stoppested fra MySQL databasen. Koordinaterne vil blive sendt tilbage til viewet, der nu vil oprette en ny marker, med position på kortet tilsvarende de modtaget koordinater. Administratoren har nu mulighed for at trække i markeren for at ændre dens position, og ændre dens navn i feltet 'StopName'. Når de ønskede ændringer er fortaget, trykkes der på knappen 'Save changes' der lavetet asynkron kald til StopController funktionen SaveChangeToStop(), der kalder videre ned i data tilgangs laget, der vil opdatere positionen og navnet for den valgte bus.

\end{document}