\documentclass[Main.tex]{subfiles} 
\begin{document}

\subsection{Proces/task kommunikation og synkronisering}
\textbf{Kommunikation}\\
TrackABusprovideren er en klasse, som bliver kaldt fra Main tråden når MySQL databasen skal tilgås. Dette sker ved at TrackABusProvideren laver en ny tråd, der kalder ned i data access layer til SoapProvideren der tilgår databasen, og retuner til TrackABusProvider med det relevante data. For at tråden i TrackABusProvideren kan sende data tilbage til main tråden, bliver der brugt en message handler, der lytter på om der kommer en besked fra TrackABusProvideren.\\\\
updateTimeThread snakker sammen med main tråden for at opdatere tiden på skærmen, bliver der brugt en handler, som er konfigureret til at sende beskeder til main tråden. Når tiden er udregnet, bliver der oprettet en ny runnable klasse der vil blive sendt som besked til main tråden, gennem handleren. Denne besked vil blive sat i kø, og eksekveret ved lejlighed.\\\\
Både SetFavoriteBusRoute og RemoveFavorite bliver begge startet af main tråden, men da de blot skal indsætte og slette fra SQLite databasen, har de ikke behov for at kommunikerer med andre tråde.\\
\\
Administrations hjemmesidens main tråd og background tråd snakker sammen ved brug af AJAX kald, \textit{Se afsnit 4.2.2 Komponent 3: Adinistrations hjemmeside} for hvordan dette virker og er implementeret, dette kald starter en asynkron task der bliver kørt på serveren. Når serveren er færdig med at udføre tasken vil der blive sendt et response tilbage til clienten der lavede AJAX kaldet.
 \\\\
\textbf{Synkronisering}\\
Trådene SetFavoriteBusRoute og RemoveFavorite er de eneste tråde der har behov for at blive synkroniseret. grunden til at TrackABusProvideren ikke har brug for Synkronisering er, at den ikke kan skrive til MySQL databasen, kun hente. SetFavoriteBusRoute skal skrive til SQLite databasen, dette skal synkroniseres så der ikke bliver skrevet flere gange til SQLite databasen på samme tid. Dette er blevet opnået ved at knappen der bliver brugt til at favorisere en bus, bliver deaktiveret indtil tråden er færdig med at skrive til databasen, dette gør det ikke er muligt at starte 2 tråde der skriver til MySQL databasen på samme tid.\\\\
Administrations hjemmesidens client og server skal Synkroniseres, så der ikke bliver skrevet til databasen flere gange på 1 gang. Dette sker på samme måde som i mobil applikationen, ved at det ikke er muligt at skrive til databasen, hvis der allerede er en task der er i gang med at skrive til databasen.

\end{document}