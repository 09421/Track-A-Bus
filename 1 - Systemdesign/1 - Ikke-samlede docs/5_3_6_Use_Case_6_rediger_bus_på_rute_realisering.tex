\documentclass[Main.tex]{subfiles} 
\begin{document}

\subsubsection{Use Case 6: Rediger bus på rute}
Rediger bus på rute Use Casen består af 2 normalforløb, hvor det første handler om at kunne tilføje en bus til en busrute, og normalforløb handler om at kunne fjerne en bus fra en busrute. Begge normalforløb bliver startet fra \url{www.TrackABus.dk/bus}, Brugergrænsenfladen kan ses på figur \ref{fig:BusHjemmeside}. Viewet vil, når siden er blevet indlæst, kalde funktionen ExecuteOnLoad() der laver tre asynkrone kald til dens controller, der henter navne på alle busruterne, alle busserne, og alle busser der ikke er knyttet til nogle rute. Når disse er færdige vil viewet opdatere de relevante lister på skærmen.

Administratoren kan initialisere normalforløb 1, ved at vælge en busrute, fra listen af alle busruter. Ved tryk på en busrute, vil et onchange() event blive kaldt, der lavet et asynkron kald til BusController funktionen GetBussesOnRoute() der kalder ned i data tilgangs laget for at hente alle de busser fra MySQL databasen, der er knyttet til den valgte rute. Busserne vil blive retuneret tilbage til viewet, der vil opdatere listen 'Busses on route' med de hentede busser.\\
Adminsitratoren kan nu tilføje busser fra listen 'Avaliable busses' til listen 'Busses on route', og trykke på knappen 'Save'. Dette vil lave et asynkron kald til BusController funktionen SaveChanges(), der kalder videre til data tilgangs laget, hvor funktionen SaveChangesToBus() bliver kaldt, der knytter bussen til den valgte rute.

Normalforløb 2, forgår på samme måde som i normalforløb 1, med den undtagelse at der bliver taget busser fra listen 'Busses on route' og tilføjer dem til listen 'Avaliable busses'. Efter der bliver trykket på knappen 'Save' vil der ske det samme som i normalforløb 1, hvor den rute de er knyttet til vil blive sat til null.
\end{document}