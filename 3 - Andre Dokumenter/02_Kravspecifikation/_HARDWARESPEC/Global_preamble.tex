\usepackage[T1]{fontenc} 
\usepackage[danish]{babel}				% Dansk ordbog
\usepackage{amsmath, amsfonts, amssymb} % Matematiske pakker
\usepackage{graphicx} 					% Grafiksk pakke

\usepackage[left	=3cm,
			right	=2cm,
			top		=2.2cm,
			bottom	=2cm
		]{geometry} 					% Sidejustering

\usepackage{lastpage}

\usepackage{fancyhdr}					% Header-style
\pagestyle{fancy}
\fancyhf{} % slet alt
\fancyfoot[C]{Side \thepage \text{ af} \pageref{LastPage}} % sidetallet yderst
\lhead[L]{\leftmark} % lige side, kapitel titel
\rhead{
\begin{picture}(0,0)
\put(-120,0){ \includegraphics[scale=0.2]{au-ingenioerhoejskolen_da.jpg}}
\end{picture}}
\renewcommand{\headrulewidth}{0.4pt}

\usepackage{enumerate}

\usepackage{subfiles}

%----------------------------------------------------------
% Følgende er til tabeller
%----------------------------------------------------------
\usepackage{booktabs, cellspace} 		
\addtolength\cellspacetoplimit{10pt}
\addtolength\cellspacebottomlimit{10pt}

%----------------------------------------------------------
% Følgende er til koder.
% Indsættes mellem \begin{lstlisting} og \end{lstlisting}
%----------------------------------------------------------
\usepackage{listings}
\usepackage{color}
\usepackage{textcomp}
\definecolor{listinggray}{gray}{0.9}
\definecolor{lbcolor}{rgb}{0.9,0.9,0.9}
\lstset{
	language		= [Visual]C++,
	keywordstyle	= \bfseries\ttfamily\color[rgb]{0,0,1},
	identifierstyle	= \ttfamily,
	commentstyle	= \color[rgb]{0.133,0.545,0.133},
	stringstyle		= \ttfamily\color[rgb]{0.627,0.126,0.941},
	showstringspaces= false,
	basicstyle		= \small,
	numberstyle		= \footnotesize,
	numbers			= left, % Tal? Udkommenter hvis ikke
	stepnumber		= 1,
	numbersep		= 10pt,
	tabsize			= 2,
	breaklines		= true,
	prebreak 		= \raisebox{0ex}[0ex][0ex]{\ensuremath{\hookleftarrow}},
	breakatwhitespace= false,
	aboveskip		= {1.5\baselineskip},
  columns			= fixed,
  upquote			= true,
  extendedchars		= true,
% frame=single,
% backgroundcolor=\color{lbcolor},
}


%----------------------------------------------------------
% Følgende er tabel over Use Cases - Aktører - Forventet 
% 	resultat og checkbox
% Indsættes med \begin{testcase} og \end{testcase}
%----------------------------------------------------------
\usepackage{enumitem,calc}


%\begin{traening}{2006/04/32}
%\tid 5 minutter (rekord!)
%\rute Klassisk maraton
%\kommentar Mega hurtigt,\\ nærmest fugleflugt
%\type Motoriseret flyvende genstand
%\end{traening}

\usepackage{environ,calc,ragged2e}

\makeatletter
\newcounter{punktcntr}
\def\Aktion{}
\def\Forventet{}
\def\@predata{}
\def\@Aktion{}
\def\@Forventet{}

\let\@mypunkt\@gobble

\long\def\punkt{%
  \refstepcounter{punktcntr}%
  \begingroup%
  \Collect@Body\@punkt}
\long\def\@punkt#1{%
  \def\Aktion{}%
  \def\Forventet{}%
  \def\@predata{}%
  \def\@Aktion{}%
  \def\@Forventet{}%
  \long\def\process##1\Aktion##2\Forventet##3\END{%
    \long\gdef\@predata{##1}%
    \long\gdef\@Aktion{##2}%
    \long\gdef\@Forventet{##3}%
  }%
  \process#1\END%
}

\newlength\guidelen
\setlength\guidelen{%
  \textwidth% fuld tekstbredde
  -1em-1em-1em% tre gange mellemrum mellem 'cols'
  -\widthof{\textbf{TRIN}} % bredde af col 1
  -\widthof{\textbf{Check}} % bredde af 'check'
}

\newcommand\myline[4]{%
  \parbox[t]{\widthof{\textbf{TRIN}}}{#1}%
  \hspace{1em}%
  \parbox[t]{0.5\guidelen}{\RaggedRight #2}%
  \hspace{1em}%
  \parbox[t]{0.5\guidelen}{\RaggedRight #3}%
  \hspace{1em}%
  \parbox[t]{\widthof{\textbf{Check}}}{#4}%
}

\def\endpunkt{%
  \endgroup%
  % ikke nogen grund til at bruge tabeller
  \par\vskip1em plus 0.5em%
  \noindent%
  \myline{\thepunktcntr}{\@Aktion}{\@Forventet}{}%
}

\newenvironment{testcase}{%
  \bigskip
  \noindent
  \myline{\textbf{TRIN}}%
  {\textbf{Aktion/Input}}%
  {\textbf{Forventet resultat}}%
  {\textbf{Check}}%
}{
  \bigskip
}
